# Railway Deployment Checklist âœ…

Sá»­ dá»¥ng checklist nÃ y Ä‘á»ƒ Ä‘áº£m báº£o deployment thÃ nh cÃ´ng.

## TrÆ°á»›c Khi Deploy

- [ ] Code Ä‘Ã£ Ä‘Æ°á»£c test ká»¹ trÃªn local
- [ ] Migrations Ä‘Ã£ Ä‘Æ°á»£c test trÃªn local database
- [ ] File `.env.example` Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t vá»›i táº¥t cáº£ biáº¿n mÃ´i trÆ°á»ng cáº§n thiáº¿t
- [ ] Database backup Ä‘Ã£ Ä‘Æ°á»£c táº¡o (náº¿u cÃ³ data quan trá»ng)
- [ ] Code Ä‘Ã£ Ä‘Æ°á»£c commit vÃ  push lÃªn GitHub

```bash
# Test migrations locally
cd backend
node scripts/run-migrations.js status
node scripts/run-migrations.js up

# Commit vÃ  push
git add .
git commit -m "Ready for Railway deployment"
git push origin main
```

## Cáº¥u HÃ¬nh Railway

### 1. Táº¡o Project
- [ ] ÄÄƒng nháº­p vÃ o Railway.app
- [ ] Táº¡o New Project
- [ ] Connect vá»›i GitHub repository

### 2. Environment Variables
- [ ] `NODE_ENV=production`
- [ ] `PORT=3000`
- [ ] `JWT_SECRET=<your-secret-key>`
- [ ] `JWT_EXPIRES_IN=7d`
- [ ] `CORS_ORIGIN=<your-frontend-url>`
- [ ] CÃ¡c biáº¿n khÃ¡c tá»« `.env.example`

### 3. Database Volume (QUAN TRá»ŒNG!)
- [ ] VÃ o Settings â†’ Volumes
- [ ] Add Volume
- [ ] Mount Path: `/app/backend/database/data`
- [ ] Size: 1GB (hoáº·c theo nhu cáº§u)

### 4. Build Settings (TÃ¹y chá»n)
- [ ] Build Command: `cd backend && npm install`
- [ ] Start Command: `cd backend && npm start`

## Sau Khi Deploy

### Kiá»ƒm Tra Logs
- [ ] VÃ o Deployments tab
- [ ] Click vÃ o deployment má»›i nháº¥t
- [ ] Kiá»ƒm tra logs cÃ³ dÃ²ng:
  ```
  ğŸ”„ Running database migrations...
  âœ… Migrations completed
  ğŸš€ Server running on http://localhost:3000
  ```

### Test API
- [ ] Copy Railway URL tá»« dashboard
- [ ] Test health endpoint:
  ```bash
  curl https://YOUR_RAILWAY_URL/api/health
  ```
- [ ] Test login endpoint
- [ ] Test cÃ¡c API endpoints chÃ­nh

### Kiá»ƒm Tra Database
- [ ] Má»Ÿ Railway Shell
- [ ] Cháº¡y migration status:
  ```bash
  cd backend
  node scripts/run-migrations.js status
  ```
- [ ] XÃ¡c nháº­n táº¥t cáº£ migrations Ä‘Ã£ cháº¡y thÃ nh cÃ´ng

## Troubleshooting

### Náº¿u Migration Fail
- [ ] Kiá»ƒm tra logs Ä‘á»ƒ xem lá»—i cá»¥ thá»ƒ
- [ ] Sá»­a lá»—i trong migration file
- [ ] Push code má»›i
- [ ] Railway tá»± Ä‘á»™ng redeploy

### Náº¿u Database Bá»‹ Máº¥t
- [ ] Kiá»ƒm tra Volume Ä‘Ã£ Ä‘Æ°á»£c mount chÆ°a
- [ ] Mount path pháº£i lÃ : `/app/backend/database/data`
- [ ] Redeploy service sau khi cáº¥u hÃ¬nh Volume

### Náº¿u Server KhÃ´ng Start
- [ ] Kiá»ƒm tra logs Ä‘á»ƒ xem lá»—i
- [ ] Kiá»ƒm tra environment variables
- [ ] Kiá»ƒm tra dependencies Ä‘Ã£ Ä‘Æ°á»£c install chÆ°a
- [ ] Kiá»ƒm tra start command Ä‘Ãºng chÆ°a

## Monitoring

### Sau Deploy ThÃ nh CÃ´ng
- [ ] Monitor logs trong 5-10 phÃºt Ä‘áº§u
- [ ] Kiá»ƒm tra memory usage
- [ ] Kiá»ƒm tra response time
- [ ] Test cÃ¡c tÃ­nh nÄƒng chÃ­nh cá»§a app

### Äá»‹nh Ká»³
- [ ] Kiá»ƒm tra logs hÃ ng ngÃ y
- [ ] Monitor database size
- [ ] Backup database Ä‘á»‹nh ká»³
- [ ] Update dependencies khi cáº§n

## ThÃªm Migration Má»›i

Khi cáº§n thÃªm migration má»›i:
- [ ] Táº¡o file migration trong `backend/database/migrations/`
- [ ] Test migration trÃªn local
- [ ] Commit vÃ  push code
- [ ] Railway tá»± Ä‘á»™ng deploy vÃ  cháº¡y migration má»›i
- [ ] Kiá»ƒm tra logs Ä‘á»ƒ xÃ¡c nháº­n migration cháº¡y thÃ nh cÃ´ng

## Notes

- âœ… Migrations tá»± Ä‘á»™ng cháº¡y má»—i khi server restart
- âœ… Migrations Ä‘Ã£ cháº¡y sáº½ khÃ´ng cháº¡y láº¡i
- âœ… Server khÃ´ng crash náº¿u migration fail
- âœ… Database Ä‘Æ°á»£c persist trong Volume
- âœ… CÃ³ thá»ƒ rollback migration náº¿u cáº§n

## LiÃªn Há»‡ Support

Náº¿u gáº·p váº¥n Ä‘á»:
1. Kiá»ƒm tra [RAILWAY_DEPLOYMENT.md](./RAILWAY_DEPLOYMENT.md)
2. Kiá»ƒm tra [backend/database/migrations/README.md](./backend/database/migrations/README.md)
3. Xem Railway logs Ä‘á»ƒ debug
4. Má»Ÿ Railway Shell Ä‘á»ƒ cháº¡y commands thá»§ cÃ´ng
